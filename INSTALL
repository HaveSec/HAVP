
BASIC INSTALLATION
==================

This software is GPL2!

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
more details.

You MUST check your antivirus licence for the use with HAVP. Maybe you are
not allowed to use it with HAVP. We don't take ANY WARRANTY!!


Installation:

./configure
make
make install

It is recommended to create a havp user:

# groupadd havp 
# useradd havp

Check the configfile: /usr/local/etc/havp/havp.config

If Linux is used, you need to mount a filesystem for mandatory locking.
(There may be problems if tmpfs/ramdisk is used. At your own risk.)
No mounting is needed on Solaris, as ufs supports it directly.

# mount /dev/hdxx /var/tmp/havp -o mand

If you do not have a partition free, you can create a loopback file:

# dd if=/dev/zero of=/var/havp.fs bs=1MB count=1000
# mkfs.ext3 /var/havp.fs
# mount /var/havp.fs /var/tmp/havp -o loop,mand

Make sure directories have correct permissions for havp user: 

# chown havp /var/tmp/havp
# chown havp /var/log/havp 
# chwon havp /var/run/havp

Start havp:

# /etc/init.d/havp start

If you don't want to use the rc-script you can start havp directly:

# /usr/local/sbin/havp -c /path/to/config

If you have problems check the logfiles:

/var/log/havp/havp.log
/var/log/havp/access.log

More information and help can be found at HAVP forum: http://havp.hege.li/


OS SPECIFIC INSTRUCTIONS
========================

Use of GNU make is recommended for building.

Notice that on Solaris you may need lots of swap space if you use library
scanners (ClamAV and Trophie). It wants to reserve it even when it is not
really used. If there is not enough, you will get fork errors. Worst case
formula: (20MB * USEDLIBRARYSCANNERS) * (USEDSCANNERS + 1) * SERVERNUMBER.

Linux:
------

Use GCC 3.3+.

Solaris 9:
----------

GCC 3.4.2 from sunfreeware.com is recommended.

You may need to fix GCC headers like this:

# cd /usr/local/libexec/gcc/*/3.4.2/install-tools
# ./mkheaders

Solaris 10:
-----------

Use GCC 3.4.x that comes bundled at /usr/sfw/bin/gcc.
It is installed from SUNWgcc package.


SCANNER SPECIFIC INSTRUCTIONS
=============================

ClamAV 
------

Scanning limits can be set from default.h before compiling HAVP.

Library is used directly, so there is no need for clamd running. Freshclam
should be naturally used.

If you choose to use clamd (which is not recommended as library support is
faster), you need to enable AllowSupplementaryGroups in clamd.conf, and add
clamav user to havp group.


Kaspersky 
---------

Tested with aveserver daemon found in Linux File Server and Linux Mail
Server package.

You should set ReportLevel=1 at [aveserver.report] section, so log will not
fill disk.

Daemon is required to be running.


Trend Micro (Trophie)
---------------------

/etc/iscan must point to the directory where libvsapi.so and virus patterns
/are located. Create link if necessary.

Trend library is used directly, so it is not needed for daemon to be
running. You should naturally run some pattern update script, if Trend
itself is not running.


AVG 
---

Recommended changes to avg.conf: 

 [AvgCommon] 

 heuristicAnalysis = 1 
 processesArchives = 1 

 [AvgDaemon] 

 # Raise number of daemons equal to SERVERNUMBER 
 numOfDaemons = xx 

Daemon is required to be running. 


F-Prot 
------

Remove "-disinf" from FPROT_SCANDEFAULTS at f-prot.conf. 

Daemon is required to be running.


NOD32
-----

Tested with Linux Mail Server and File Server packages. File Server version
can not show virus names.

Daemon is required to be running.


Sophos
------

You need to make sure Sophie is working first, you can get it from:
http://www.clanfield.info/sophie/

Change user or group to havp user in sophie.cfg, so it can read tempfiles.
Also change maxproc value to atleast MAXSERVERS value!

Sophie daemon is required to be running.

