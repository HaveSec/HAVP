x
This software is GPL2!

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
more details.

You MUST check your antivirus licence for the use with HAVP. Maybe you are
not allowed to use it with HAVP. We don't take ANY WARRANTY!!


UPGRADING
=========

Just install HAVP normally. Your config will be preserved, but check
havp.config for possible new options. Templates are overwritten, so if
you have your own, make sure it is not in any default directory.


BASIC INSTALLATION
==================

Installation:

  # ./configure
  # make
  # make install

It is recommended to create a havp user:

  # groupadd havp 
  # useradd -g havp havp

Check the configfile: /usr/local/etc/havp/havp.config

If Linux is used, you need to enable mandatory locking for the partition
which your tempfiles are located in. Solaris supports mandatory locking
without any extra steps.

  If you only have root partition available, you can enable mandatory locking
  support this like this:

  mount -o remount,mand / 

  You can naturally use this for /var or any other partition. Also add
  mand-option to /etc/fstab so it will stay after reboot.

  Using tmpfs might have some problems, make sure you test it properly.

Make sure directories have correct permissions for havp user: 

  # chown havp /var/tmp/havp
  # chown havp /var/log/havp 
  # chown havp /var/run/havp

Start havp:

  # /etc/init.d/havp start

If you don't want to use the rc-script you can start havp directly:

  # /usr/local/sbin/havp -c /path/to/config

If you have problems check the logfiles:

  /var/log/havp/havp.log
  /var/log/havp/access.log

More information and help can be found at HAVP forum: http://havp.hege.li/


OS SPECIFIC INSTRUCTIONS
========================

Use of GNU make is required for building.

Notice that on Solaris you may need lots of swap space if you use library
scanners (ClamAV and Trophie). It wants to reserve it even when it is not
really used. If there is not enough, you will get fork errors. Worst case
formula: (20MB * USEDLIBRARYSCANNERS) * (USEDSCANNERS + 1) * SERVERNUMBER.

Linux:
------

Use GCC 3.4+.

Solaris 9:
----------

GCC 3.4.2 from sunfreeware.com is recommended.

You may need to fix GCC headers like this:

  # cd /usr/local/libexec/gcc/*/3.4.2/install-tools
  # ./mkheaders

Solaris 10:
-----------

Use GCC 3.4.x that comes bundled at /usr/sfw/bin/gcc.
It is installed from SUNWgcc package.

FreeBSD:
--------

Use GCC 3.4+ from ports. FreeBSD does not support mandatory locking, which
means KEEPBACK settings can not be used (only TRICKLING is supported). This
makes big downloads "hang" more.


SCANNER SPECIFIC INSTRUCTIONS
=============================

ClamAV 
------

Library is used directly, so there is no need for clamd running.

If you choose to use clamd (which is not recommended as library support has
less overhead), you need to enable AllowSupplementaryGroups in clamd.conf,
and add clamav user to havp group.

Remember to have freshclam running.


Kaspersky 
---------

Tested with aveserver daemon found in Linux File Server and Linux Mail
Server package.

You should set ReportLevel=1 at [aveserver.report] section, so log will not
fill disk.

Daemon is required to be running.


Trend Micro (Trophie)
---------------------

/etc/iscan must point to the directory where libvsapi.so and
virus patterns are located. Create link if necessary.

Trend library is used directly, so daemon is not required to be running.
You should naturally run some pattern update script, if Trend itself is
not running.


AVG 
---

Recommended changes to avg.conf: 

 [AvgCommon] 

 heuristicAnalysis = 1 
 processesArchives = 1 

 [AvgDaemon] 

 # Raise number of daemons atleast equal to SERVERNUMBER/MAXSERVERS
 numOfDaemons = xx 

Daemon is required to be running. 


F-Prot 
------

Daemon is required to be running.


NOD32
-----

Tested with Linux Mail Server and Linux File Server packages.
File Server version can not display virus names.

Daemon is required to be running.


Sophos (Sophie)
---------------

You need to make sure Sophie is working first, you can get it from:
http://www.clanfield.info/sophie/

Change user or group to havp user in sophie.cfg, so it can read tempfiles.
Also change maxproc value to atleast SERVERNUMBER/MAXSERVERS value!

Sophie daemon is required to be running.


Avast!
------

Linux/Unix Servers version is required.

Recommended changes to avastd.conf:

 # Raise number to atleast equal of SERVERNUMBER
 daemoncount = XX
 # Raise number to atleast equal of MAXSERVERS
 maxdaemoncount = XX
 archivetype = A
 testall = 1
 testfull = 0

Daemon is required to be running.

